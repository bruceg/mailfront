<html>
<body>

<h2><a href="mailfront.html">MailFront</a></h2>

<h1>Protocol: smtp</h1>

<hr />

<p>The SMTP protocol module has the following features:</p>

<ul>

  <li>Handles
    <a href="http://www.faqs.org/rfcs/rfc2554.html">RFC 2554</a> SMTP
    authentication.  Note that
    the <a href="plugin-require-auth.html">require-auth plugin</a>
    and/or the <a href="plugin-relayclient.html">relayclient plugin</a>
    will need to be loaded to make use of this authentication.</li>

  <li>Automatically handles either bare NL or
    <a href="http://www.faqs.org/rfcs/rfc821.html">RFC 821</a> /
    <a href="http://www.faqs.org/rfcs/rfc2821.html">RFC 2821</a> compliant
    CR/NL end-of-line conventions.</li>

  <li>Will drop connections on inactivity or too many errors.</li>

  <li>All error responses are logged.</li>

  <li>Handles (ignores)
    <a href="http://www.faqs.org/rfcs/rfc1869.html">RFC 1869</a>
    extended parameters on the <tt>RCPT TO:</tt> and <tt>MAIL FROM:</tt>
    commands.</li>

  <li>Configurable initial greeting.</li>

  <li>Supports
    <a href="http://www.faqs.org/rfcs/rfc1870.html">RFC 1870</a>
    SMTP Service Extension for Message Size Declaration.</li>

</ul>

<h2>Configuration</h2>

<dl>

  <dt><tt>$MAXNOTIMPL</tt></dt>
  <dd>The maximum number of unimplemented commands (resulting in a
    "<tt>500 Not implemented.</tt>" response) allowed in a session
    before dropping the connection. No default.</dd>

  <dt><tt>$SESSION_TIMEOUT</tt></dt>
  <dd>The number of seconds from the start of the session after which to
    drop the connection. Defaults to 86400 seconds (24 hours).</dd>

  <dt><tt>$SMTPGREETING</tt></dt>
  <dd>The greeting text to send on startup. If not set, the greeting is
    generated based on the domain name in <tt>${$PROTO}LOCALHOST</tt>
    set by the invoking
    <a href="http://cr.yp.to/proto/ucspi.txt">UCSPI</a> server such as
    <a href="http://cr.yp.to/ucspi-tcp/tcpserver.html">tcpserver</a>.</dd>

  <dt><tt>$TIMEOUT</tt></dt>
  <dd>The number of seconds of inactivity after which to drop
    connections. Defaults to 1200 seconds (20 minutes).</dd>

  <dt><tt>$TLS_CERTFILE</tt></dt>
  <dd>The filename containing the TLS certificate and any intermediate
    certificates used to sign it. The file contents must be in PEM
    format. This setting is required for operation <tt>STARTTLS</tt> or
    SMTPS mode.</dd>

  <dt><tt>$TLS_COMPAT</tt></dt>
  <dd>Disable certain (security) features in TLS in order to maintain
    maximum compatibility with buggy clients.</dd>

  <dt><tt>$TLS_DH_PARAMS</tt></dt>
  <dd>The filename containing the Diffie-Hellman key exchange
    parameters, as generated by <tt>openssl dhparam</tt> or <tt>certtool
    --generate-dh-params</tt>. If not specified, default parameters are
    used.</dd>

  <dt><tt>$TLS_IMMEDIATE</tt></dt>
  <dd>If set, this plugin will switch to TLS mode on startup (if
    possible, see below). This is primarily useful for running mailfront
    as a SMTP submission server on TCP port 465 (SMTPS).</dd>

  <dt><tt>$TLS_KEYFILE</tt></dt>
  <dd>The filename containing the private key for to the
    certificate. The file contents must be in PEM format. If unset, it
    defaults to the value of <tt>$TLS_CERTFILE</tt>.</dd>

  <dt><tt>$TLS_PRIORITY</tt></dt>
  <dd>The GnuTLS priority string, which specifies the TLS session's
    handshake algorithms and options. See
    <a href="https://gnutls.org/manual/html_node/Priority-Strings.html">the
    manual page</a> for more details on possible values. Defaults to
    "<tt>NORMAL</tt>", which represents all the known to be secure
    ciphersuites.</dd>

</dl>

</body>
</html>
