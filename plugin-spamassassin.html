<html>
<body>

<h2><a href="mailfront.html">mailfront</a></h2>

<h1>Plugin: spamassassin</h1>

<hr />

<p>This plugin scans messages against a
<a href="http://spamassassin.apache.org/">SpamAssassin</a> server.  The
original message is replaced with the rewritten message sent by the
scanner, which will contain the results of the SpamAssassin scan in the
headers.  This plugin can communicate with a scanner over TCP/IP or
local UNIX domain sockets.</p>

<p><b>Note:</b> This plugin causes mailfront to save messages to temporary
files.</p>

<h2>Configuration</h2>

<dl>

<dt><tt>$SPAMD_CONNECT_TIMEOUT</tt></dt> <dd>The maximum amount of time
to wait for a response when connecting to a SpamAssassin scanner, in
milliseconds. (defaults to $SPAMD_TIMEOUT below)</dd>

<dt><tt>$SPAMD_MAXSIZE</tt></dt> <dd>The maximum message size to be
scanned, in bytes.  This limit is useful for avoiding overloading the
scanning system(s).  If the incoming message is larger than this
threshold, a warning is printed and no scanning is done.  If unset or
set to "<tt>0</tt>", there is no limit.</dd>

<dt><tt>$SPAMD_HOST</tt></dt> <dd>The hostname of the SpamAssassin
scanner.  This setting only applies if <tt>$SPAMD_PATH</tt> is not set.
If this name resolves to multiple IP addresses, all of them are tried in
sequence (starting at a random point) until one scans the message.</dd>

<dt><tt>$SPAMD_PATH</tt></dt> <dd>The file path to the local
SpamAssassin server socket.  Overrides the setting
of <tt>$SPAMD_HOST</tt>.</dd>

<dt><tt>$SPAMD_PORT</tt></dt> <dd>Use this TCP port number for the
command/response data. (defaults to 783)</dd>

<dt><tt>$SPAMD_REJECT</tt></dt> <dd>If this is set, the plugin will
reject all messages that are flagged as spam.  If <tt>$SPAMD_REJECT</tt>
is not an empty string, that string will be used as the reject
message.</dd>

<dt><tt>$SPAMD_SEND_TIMEOUT</tt></dt> <dd>The maximum amount of time to
wait for the output buffer to clear when sending data to a SpamAssassin
scanner, in milliseconds. (defaults to $SPAMD_TIMEOUT below)</dd>

<dt><tt>$SPAMD_TIMEOUT</tt></dt> <dd>The maximum amount of time to wait
for a response from the SpamAssassin scanner, in milliseconds. (defaults to
5000)</dd>

<dt><tt>$SPAMD_USER</tt></dt> <dd>If set, the plugin will tell the
scanner to use the configuration for the named user instead of a default
configuration.</dd>

</dl>

<h2>Sender Action</h2>

<p>None</p>

<h2>Recipient Action</h2>

<p>None</p>

<h2>Data Action</h2>

<p>None</p>

<h2>Message Action</h2>

<p>The message is scanned when all the data has been completely
transmitted (to prevent timeout issues with sending data to the
SpamAssassin server).</p>

</body>
</html>
